get:
  x-internal: true
  summary: Search operators
  description: Search operators
  security:
    - OAuth2: ['ROLE_SYS_MGR', 'ROLE_SYS_ANS']
  tags:
    - Operators
  parameters:
    - in: header
      name: Authorization
      description: Bearer Token
      schema:
        type: string
      required: true
    - in: query
      name: id
      description: The operator id
      schema:
        type: integer
    - in: query
      name: name
      description: The name of the operator
      schema:
        type: string
    - in: query
      name: short_name
      x-internal: true
      description: Operator short name
      schema:
        type: string
    - in: query
      name: q
      description: Free search for operators by name
      schema:
        type: string
    - in: query
      name: fields
      description: Response will contain only the id and the selected fields
      style: form
      schema:
        type: array
        items:
          $ref: ../../models/entities/entity-filter-field.yml
    - in: query
      name: sort
      description: Sorting of enum fields with format field:[asc|desc]. For example 'name:desc'
      schema:
        $ref: ../../models/entities/entity-sort-field.yml
    - in: query
      name: limit
      schema:
        type: integer
      description: Limit (default 50, max 1000)
    - in: query
      name: offset
      schema:
        type: integer
      description: Offset (default 0)
  responses:
    '200':
      description: List of operators
      content:
        application/json:
          schema:
            $ref: ../../models/operator/operators.yml
    '400':
      description: Bad request
      content:
        application/json:
          schema:
            $ref: ../../models/common/error.yml
    '401':
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: ../../models/common/error-auth.yml
    '403':
      description: Forbidden
      content:
        application/json:
          schema:
            $ref: ../../models/common/error.yml
    '404':
      description: Not found
      content:
        application/json:
          schema:
            $ref: ../../models/common/error.yml
    '500':
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: ../../models/common/error.yml
post:
  x-internal: true
  summary: New operator
  description: Creates new operator
  security:
    - OAuth2: ['ROLE_SYS_MGR']
  tags:
    - Operators
  parameters:
    - in: header
      name: Authorization
      description: Bearer Token
      schema:
        type: string
      required: true
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          required:
            - name
            - short_name
            - social_reason
            - nif
            - email
            - default_language
            - types
          properties:
            name:
              type: string
            short_name:
              type: string
            currency_code:
              type: string
            olson_id:
              type: string
            shard:
              type: string
              enum:
                - TICKETS_1
                - TICKETS_2
                - TICKETS_3
                - TICKETS_4
                - TICKETS_5
            language_code:
              type: string
              description: IETF language tag standard
              example: es-ES
            gateways:
              type: array
              items:
                type: string
            currencies:
              x-internal: true
              $ref: ../../models/operator/create-operator-currencies.yml
  responses:
    '201':
      description: Operator created
      content:
        application/json:
          schema:
            additionalProperties: false
            type: object
            properties:
              id:
                type: integer
                format: int64
              password:
                type: string
    '400':
      description: bad request
      content:
        application/json:
          schema:
            $ref: '../../models/common/error.yml'
    '401':
      description: invalid token
      content:
        application/json:
          schema:
            $ref: '../../models/common/error-auth.yml'
    '403':
      description: unauthorized
      content:
        application/json:
          schema:
            $ref: '../../models/common/error.yml'

    '500':
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '../../models/common/error.yml'
