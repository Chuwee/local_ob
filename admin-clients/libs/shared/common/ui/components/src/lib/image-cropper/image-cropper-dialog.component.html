<div class="dialog-msg-container flex flex-col grow shrink basis-full">
    <div mat-dialog-title class="self-start">
        <div class="flex grow justify-between">
            <h2 class="secondary title grow">{{'TITLES.IMAGE_CROPPER' | translate}}</h2>
            <button mat-icon-button type="button" class="ob-button small" (click)="close()">
                <mat-icon>close</mat-icon>
            </button>
        </div>
    </div>
    <div mat-dialog-content class="cropper-dialog">
        <div class="flex flex-col gap-4">
            <app-image-cropper #imageCropper
                [cropperOptions]="cropperOptions" [cropBoxData]="cropBoxData" [imageRestrictions]="imageRestrictions"
                [file]="$file()" [allowPngConversion]="allowPngConversion" (hasError)="cropperFailed = $event"
                (export)="exportImage($event)" />
            @if (showAltImageField) {
                <mat-form-field appearance="outline" class="ob-form-field field-with-label">
                    <mat-label>{{'FORMS.LABELS.ALT_TEXT' | translate}}</mat-label>
                    <input matInput [placeholder]="'FORMS.LABELS.ALT_TEXT_PLACEHOLDER' | translate" [formControl]="altImageControl"
                        (keydown)="$event.stopPropagation()">
                    <mat-icon matIconSuffix
                        class="ob-help-icon"
                        fontIcon="help_outline"
                        [matTooltip]="'FORMS.LABELS.ALT_TEXT_INFO' | translate" />
                    <mat-error [ob-form-errors]="altImageControl" field="altImage" />
                </mat-form-field>
            }
        </div>
    </div>
    <div mat-dialog-actions>
        <div class="flex grow justify-end">
            <button type="button" mat-button class="ob-button" (click)="close()">
                {{'FORMS.ACTIONS.CANCEL' | translate}}
            </button>
            <button mat-flat-button color="primary" type="button" class="ob-button" (click)="save()" [disabled]="cropperFailed">
                {{'FORMS.ACTIONS.SAVE' | translate}}
            </button>
        </div>
    </div>
</div>