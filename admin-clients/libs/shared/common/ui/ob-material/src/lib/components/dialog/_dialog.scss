@use '@angular/material' as mat;
@mixin dialog-container-override($palettes, $colors, $typography) {
    $alert-palette: map-get($palettes, alert);
    $warn-palette: map-get($palettes, warn);
    $info-palette: map-get($palettes, info);
    $success-palette: map-get($palettes, success);
    $ob-bg-1: map-get($colors, ob-bg-1);
    $ob-grey-light-10: map-get($colors, ob-grey-light-10);
    $black: map-get($colors, ob-black);
    $white: map-get($colors, ob-white);

    @keyframes slideUp {
        from {
            transform: translateY(100%);
        }
        to {
            transform: translateY(0);
        }
    }

    @keyframes slideLeft {
        from {
            transform: translateX(100%);
        }
        to {
            transform: translateX(0);
        }
    }


    .ob-dialog {
        &:not(.lateral) {
            transition: width 100ms ease-in-out, height 100ms ease-in-out;
        }
        &.full-screen {
            width: 100%;
        }
        &.extra-large {
            width: 1000px;
        }
        &.large {
            width: 800px;
        }
        &.medium {
            width: 500px;
        }
        &.small {
            width: 360px;
        }
        &.extra-small {
            width: 260px;
        }
        &.no-padding {
            .mat-mdc-dialog-content {
                padding: 0;
            }
        }
        &.warn {
            .mdc-dialog__surface {
                border-top-style: solid;
                border-top-width: 8px;
                border-top-color: mat.m2-get-color-from-palette(
                    $warn-palette,
                    500
                );
            }
        }
        &.alert {
            .mdc-dialog__surface {
                border-top-style: solid;
                border-top-width: 8px;
                border-top-color: mat.m2-get-color-from-palette(
                    $alert-palette,
                    500
                );
            }
        }
        &.info {
            .mdc-dialog__surface {
                border-top-style: solid;
                border-top-width: 8px;
                border-top-color: mat.m2-get-color-from-palette(
                    $info-palette,
                    500
                );
            }
        }
        &.success {
            .mdc-dialog__surface {
                border-top-style: solid;
                border-top-width: 8px;
                border-top-color: mat.m2-get-color-from-palette(
                    $success-palette,
                    500
                );
            }
        }
        .mat-mdc-dialog-container {
            --mdc-dialog-supporting-text-font: Nunito Sans;
            --mdc-dialog-supporting-text-line-height: 20px;
            --mdc-dialog-supporting-text-size: 14px;
            --mdc-dialog-supporting-text-weight: 400;
            --mdc-dialog-supporting-text-color: var(--ob-theme-color-black);
            --mdc-dialog-supporting-text-tracking: 0;
            --mat-dialog-with-actions-content-padding: 16px 24px 24px 24px;
            padding: 0;
            border-radius: 5px;
            overflow-y: hidden;
            .mdc-dialog__title {
                align-items: center;
                +.mdc-dialog__content {
                    padding-top: 24px;
                }
            }
        }
        .mdc-dialog__title::before {
            content: none;
        }

        .mdc-dialog__content>:first-child.ob-form-field {
            margin-top: 16px;
        }

        .mat-mdc-dialog-title {
            width: 100%;
            margin: 0;
            padding: 24px 24px 0;
            .title {
                @include mat.m2-typography-level($typography, headline);
                overflow: hidden;
                text-overflow: ellipsis;
            }
            .ob-button.small.only-icon {
                // cross for closing dialog
                margin-top: -2px;
            }
        }
        .mat-mdc-dialog-content {
            width: 100%;
            padding: 32px 24px;
            margin: 0;
            max-height: calc(
                90vh - 148px
            ); // height minus header and action bar
            box-sizing: border-box;
            &.with-sticky-content {
                padding-top: 0;
                margin-top: 32px;  // coupled with mat-mdc-dialog-content padding-top
            }
            &.with-wizard-bar {
                max-height: calc(
                    90vh - 195px
                ); // height minus header, wizard bar and action bar
            }
            .mat-expansion-panel.ob-dialog-panel {
                &.neutral {
                    --mat-expansion-container-background-color: $ob-bg-1;
                }
                box-shadow: none;
                border-radius: 0;
                &:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled="true"]) {
                    background: none;
                }
                &:first-of-type,
                &:last-of-type {
                    border-radius: 0 !important;
                }
                &.mat-expansion-panel-spacing,
                &:not(.mat-expansion-panel-spacing) {
                    margin: 16px 0;
                }
                &.mat-expansion-panel-spacing:first-child, // override material
                &:first-child {
                    margin-top: 0;
                }
                &.mat-expansion-panel-spacing:last-child, // override material
                &:last-child {
                    margin-bottom: 0;
                }
                &.tiny {
                    // csv-selector.component (p.ej. en import-collective-codes)
                    .mat-expansion-panel-header {
                        height: 24px;
                        margin-top: 5px;
                        border: 0;
                        .mat-expansion-indicator::after {
                            padding: 3px;
                            border-width: 0 2px 2px 0;
                            margin-bottom: 5px;
                        }
                        .mat-expansion-panel-header-title {
                            @include mat.m2-typography-level($typography, body-2);
                            color: $black;
                        }
                    }
                    .mat-expansion-panel-content {
                        margin-bottom: 16px;
                        .mat-expansion-panel-body {
                            padding: 16px 0 0 24px;
                        }
                    }
                }
                .mat-expansion-panel-header {
                    height: 22px;
                    &.ng-trigger-expansionHeight {
                        height: 22px;
                    }
                    padding: 0 5px 2px;
                    border-bottom: 1px solid map-get($colors, ob-grey-light-10);
                    border-radius: 0;
                    -webkit-user-select: none;
                    -moz-user-select: none;
                    -ms-user-select: none;
                    user-select: none;
                    &.mat-expansion-toggle-indicator-before
                    .mat-expansion-indicator {
                        margin: 0 8px 0 0;
                        &::after {
                            padding: 2px;
                            margin-bottom: 6px;
                            border-width: 0 2px 2px 0;
                            color: map-get($colors, ob-black);
                        }
                    }
                    .mat-expansion-panel-header-title {
                        @include mat.m2-typography-level($typography, title);
                    }
                    &:first-of-type,
                    &:last-of-type {
                        border-radius: 0 !important;
                    }
                }
                .mat-expansion-panel-content {
                    .mat-expansion-panel-body {
                        padding: 16px 0 24px;
                    }
                }
            }
            .operation-summary {
                display: flex;
                flex-direction: row;

                .label {
                  color: var(--ob-theme-color-grey);
                }
                .value {
                  font: var(--ob-theme-font-headline);
                  font-family: 'Nunito Sans';
                }

                .current-amount,
                .new-amount {
                  display: flex;
                  flex-direction: column;
                  align-items: center;
                  flex: 0 1 50%;
                }
                .current-amount {
                  border-right: 1px solid var(--ob-theme-color-grey-light-10);

                  .value {
                    font-weight: 400;
                  }
                }
                .new-amount .value {
                  color: var(--ob-theme-color-accent);
                }
            }
        }
        .mat-mdc-dialog-actions {
            width: 100%;
            padding: 16px 24px 0 24px;
            margin: 0;
            background-color: $ob-bg-1;
            button {
                margin: 0 0 16px 0;
            }
            .mat-mdc-button-base + .mat-mdc-button-base {
                margin-left: 16px;
            }
            .footer-info {
                margin-bottom: 16px;
            }
        }
        .ob-form-field {
            &.ob-date-form-field {
                margin-bottom: 0;
            }
        }
        .ob-date-time-form-field {
            .ob-form-field:not(:last-child) {
                margin-bottom: 0;
            }
        }
        .dialog-grid-form *[fxlayoutgap~="grid"] {
            .ob-form-field {
                margin-bottom: 0;
            }
            .ob-grid-divider {
                margin: -15px 20px 0 0;
            }
        }
        &.lateral {
            animation: slideLeft 0.3s forwards 0s ease-in;
            width: 650px;
            .mdc-dialog__surface {
                border-radius: 0;
            }
            .mat-mdc-dialog-title {
                border-bottom: 1px $ob-grey-light-10 solid;
                padding: 24px;
            }
            &:not(.no-action-bar) {
                .mat-mdc-dialog-content {
                    height: calc(
                        100vh - 165px
                    );
                    max-height: calc(
                        100vh - 165px
                    ); // height minus header and action bar
                }
            }
            &.no-action-bar {
                .mat-mdc-dialog-content {
                    max-height: unset;
                }
                .dialog-msg-container {
                    height: 100vh;
                }
            }
            .mat-mdc-dialog-actions {
                background-color: $white;
                box-shadow: 0 9px 15px $black;
            }
            &.ob-dialog .mat-mdc-dialog-container {
                border-radius: 0;
            }
        }
        &.handset {
            .mat-mdc-dialog-actions {
                //mat-mdc-dialog-actions without flex in the html
                display: flex;
                flex-direction: row;
                flex-wrap: nowrap;
                place-content: center flex-end;
                align-items: center;
                box-sizing: border-box;
            }

            @media screen and (max-width: 599.98px) and (orientation: portrait),
            screen and (max-width: 959.98px) and (orientation: landscape) {
                animation: slideUp 0.2s forwards 0s ease-in;
                align-self: end;
                max-width: 100vw !important;
                min-width: 100vw !important;

                .mdc-dialog__surface {
                    border-bottom-left-radius: 0;
                    border-bottom-right-radius: 0;
                }

                .mat-mdc-dialog-content {
                    max-height: 70dvh;
                    height: 70dvh;
                    &.with-sticky-content {
                        max-height: calc(70dvh - 32px);
                        height: calc(70dvh - 32px); // coupled with mat-mdc-dialog-content padding-top
                    }
                }

                .mat-mdc-dialog-actions {
                    padding-inline: 24px;
                    padding-block: 16px;
                    flex-direction: column;
                    align-items: stretch;
                    .handset-hide {
                        display: none;
                    }
                    button {
                        margin: 0;
                    }
                    .mat-mdc-button-base + .mat-mdc-button-base {
                        margin: 0;
                    }
                }
            }

            @media screen and (max-width: 599.98px) and (orientation: portrait) {
                .mat-mdc-dialog-content {
                    max-height: 70dvh;
                    height: 70dvh;
                    &.with-sticky-content {
                        max-height: calc(70dvh - 32px);
                        height: calc(70dvh - 32px); // coupled with mat-mdc-dialog-content padding-top
                    }
                }
            }

            @media screen and (max-width: 959.98px) and (orientation: landscape) {
                .mat-mdc-dialog-content {
                    max-height: 50dvh;
                    height: 50dvh;
                    &.with-sticky-content {
                        max-height: calc(50dvh - 32px);
                        height: calc(50dvh - 32px); // coupled with mat-mdc-dialog-content padding-top
                    }
                }
            }
        }
    }
}
