@let rules = this.configurationFormGroup.controls.fallbackConfig.controls.rules;
<div class="dialog-cors-container">
    <div mat-dialog-title>
        <div class="flex flex-row justify-between">
            <h2 class="secondary title">{{ 'ADMIN_CHANNEL.CONFIGURATION.TITLES.SUBDOMAIN_CONFIG' | translate }}</h2>
<button mat-icon-button type="button" class="ob-button small" (click)="close()">
    <mat-icon fontIcon="close" />
</button>
</div>
</div>
<div mat-dialog-content>
    <div class="flex start-center">
        <mat-icon class="ob-icon small info with-text">info</mat-icon>
        {{ 'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.INFOS.DESCRIPTION'
     | translate:{ subdomainUrl: domainName } }}
    </div>
    <mat-divider class="ob-divider"></mat-divider>
    <div [formGroup]="configurationFormGroup" class="flex flex-col">
        <!-- Google Client ID -->
        <mat-form-field appearance="outline" class="ob-form-field field-with-label flex-[0_1_100%]">
            <mat-label>{{'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.LABELS.GOOGLE_CLIENT_ID' | translate}}</mat-label>
            <input matInput formControlName="googleClientId"
                [placeholder]="'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.PLACEHOLDER.GOOGLE_CLIENT_ID' | translate" />
            <mat-error [ob-form-errors]="configurationFormGroup" field="googleClientId" />
        </mat-form-field>
        <!-- DOMAIN FALLBACK -->
        <div class="flex flex-col gap-4">
            <span class="field-label">{{ 'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.LABELS.DOMAIN_FALLBACK' | translate }}</span>
            <mat-slide-toggle class="ob-slide-toggle" color="primary" formControlName="fallbackEnabled">
                {{ 'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.LABLES.ENABLE_DOMAIN_FALLBACK' | translate }}
            </mat-slide-toggle>
            <div class="edition-block flex flex-col gap-4" formGroupName="fallbackConfig">
                <!-- Fallback URL -->
                <div class="flex flex-col">
                    <mat-form-field appearance="outline" class="ob-form-field field-with-label flex-[0_1_100%]">
                        <mat-label>{{'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.LABELS.FALLBACK_URL' | translate}}</mat-label>
                        <input matInput formControlName="fallbackUrl"
                            [placeholder]="'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.PLACEHOLDER.FALLBACK_URL' | translate" />
                        <mat-error [ob-form-errors]="configurationFormGroup.get('fallbackConfig')" field="fallbackUrl" />
                    </mat-form-field>
                    <!-- Channel names toggle (RESTRICTED / ALL) -->
                    <mat-slide-toggle
                        class="ob-slide-toggle"
                        color="primary"
                        [checked]="configurationFormGroup.get('fallbackConfig.channelNames')?.value === 'RESTRICTED'"
                        (change)="onChannelNameToggle($event.checked)">
                        {{ 'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.LABLES.ENABLE_CHANNEL_NAMES' | translate }}
                    </mat-slide-toggle>
                </div>
                <!-- RULES -->
                <div class="channel-tags-container flex flex-col gap-4">
                    <div class="flex flex-col gap-8">
                        <div class="flex items-center">
                            <mat-icon class="ob-icon small inactive with-text">info</mat-icon>
                            {{ 'ADMIN_CHANNEL.CONFIGURATION.FORMS.INFOS.RULES_DESCRIPTION' | translate }}
                        </div>
                        <div formArrayName="rules" class="flex flex-col gap-4">
                            @for (rule of rules.controls; track rule;) {
                                <div class="flex flex-1 flex-row items-center" [formGroupName]="$index">
                                    <mat-form-field appearance="outline"
                                        class="ob-form-field field-with-label inline-field flex-[0_0_100px]">
                                        <mat-label>{{ 'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.LABELS.TYPE' | translate }}</mat-label>
                                        <mat-select formControlName="type"
                                            placeholder="{{'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.LABELS.OPTS.STARTS_WITH' | translate}}">
                                            <mat-option
                                                value="STARTS_WITH">{{'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.LABELS.OPTS.STARTS_WITH' | translate}}</mat-option>
                                            <mat-option
                                                value="ENDS_WITH">{{'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.LABELS.OPTS.ENDS_WITH' | translate}}</mat-option>
                                            <mat-option
                                                value="CONTAINS">{{'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.LABELS.OPTS.CONTAINS' | translate}}</mat-option>
                                            <mat-option
                                                value="IS">{{'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.LABELS.OPTS.IS' | translate}}</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <mat-divider class="ob-input-divider" />
                                    <mat-form-field appearance="outline"
                                        class="ob-form-field field-with-label inline-field flex-[0_0_100px]">
                                        <mat-label>{{ 'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.LABELS.RULE' | translate }}</mat-label>
                                        <input matInput formControlName="value"
                                            placeholder="{{'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.PLACEHOLDER.RULE_VALUE' | translate}}" />
                                    </mat-form-field>
                                    <button mat-icon-button class="ob-button small" [disabled]="rules.length == 1"
                                        (click)="removeRule($index)">
                                        <mat-icon>delete</mat-icon>
                                    </button>
                                </div>
                            }
                        </div>
                    </div>
                    <div class="add-rule flex flex-row items-center"
                        [class.disabled]="rules.length >= 15" (click)="addRule()">
                        <button mat-icon-button type="button" class="ob-button mat-stroked-button xsmall"
                            [disabled]="rules.length >= 15">
                            <mat-icon>add</mat-icon>
                        </button>
                        <span>{{ 'ADMIN_CHANNEL.CONFIGURATION.SUBDOMAIN.FORMS.ACTIONS.ADD_RULE' | translate }}</span>
                    </div>
                    <div class="flex flex-col">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div mat-dialog-actions>
    <div class="flex-1 flex flex-row justify-end">
        <button type="button" mat-button class="ob-button" (click)="close()">
            {{ 'FORMS.ACTIONS.CANCEL' | translate }}
        </button>
        <button mat-flat-button color="primary" class="ob-button" type="submit" (click)="save()" [disabled]="!configurationFormGroup.dirty">
            {{ 'FORMS.ACTIONS.SAVE_CHANGES' | translate }}
        </button>
    </div>
</div>
</div>