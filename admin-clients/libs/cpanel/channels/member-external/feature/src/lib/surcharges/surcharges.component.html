<app-form-container (cancel)="cancel()" (save)="save()" layout="menu" [disabled]="(inProgress$ | async) || !form.dirty"
    [formGroup]="form">
    <p class="short description">{{'CHANNELS.SURCHARGES.MEMBERS_PROVISIONAL_DESCRIPTION' | translate }}</p>
    <table mat-table #table [dataSource]="periods" class="ob-table surcharges-table">
        <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef class="head-cell">
                {{'CHANNELS.SURCHARGES.MEMBERS.ORDER_TYPE' | translate}}
            </th>
            <td mat-cell *matCellDef="let row">
                {{'MEMBER_ORDER.TYPE_OPTS.' + row | translate}}
            </td>
        </ng-container>
        <ng-container matColumnDef="value">
            <th mat-header-cell *matHeaderCellDef class="head-cell price-column right">
                {{'CHANNELS.SURCHARGES.MEMBERS.SURCHARGE' | translate}}
            </th>
            <td mat-cell *matCellDef="let row" class="right price-column editable-cell">
                <div class="write-value currency-value">
                    <mat-form-field appearance="outline" class="ob-form-field" subscriptSizing="dynamic">
                        @let errorMessage = form.get(row) | obErrorMessage$ | async;
                        @if (errorMessage) {
                            <mat-icon matIconPrefix [obErrorIcon]="errorMessage">
                                error_outline
                            </mat-icon>
                        }
                        <app-currency-input [formControl]="form.get(row)" class="table-input" [placeholder]="0 | localCurrency" />
                    </mat-form-field>
                </div>
            </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="['type', 'value']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['type', 'value'];" class="hoverable-row"></tr>
    </table>
</app-form-container>

<div class="spinner-container" *ngIf="inProgress$ | async">
    <mat-spinner />
</div>
