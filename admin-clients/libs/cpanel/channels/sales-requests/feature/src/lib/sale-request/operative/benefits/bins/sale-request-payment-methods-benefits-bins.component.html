<p class="ob-label">{{'SALE_REQUESTS.PAYMENT_METHODS.BENEFITS.FORMS.LABELS.BINS' | translate}}</p>
<p>{{'SALE_REQUESTS.PAYMENT_METHODS.BENEFITS.FORMS.INFOS.BINS' | translate}}</p>
<div class="flex flex-col gap-8">
    <div [class.bins-type-enabled]="form.controls.type.enabled">
        <mat-radio-group [formControl]="form.controls.type" class="radio-group-container flex flex-col gap-2 items-center">
            <mat-radio-button class="ob-radio-card-button disabled-with-contrast" [value]="'IMPORT'">
                <div class="option-title">{{'SALE_REQUESTS.PAYMENT_METHODS.BENEFITS.FORMS.LABELS.BINS_CSV' | translate}}</div>
                <div >
                    {{'SALE_REQUESTS.PAYMENT_METHODS.BENEFITS.FORMS.INFOS.BINS_CSV' | translate}}
                </div>
            </mat-radio-button>
            <mat-radio-button class="ob-radio-card-button disabled-with-contrast" [value]="'MANUAL'">
                <div class="option-title">{{'SALE_REQUESTS.PAYMENT_METHODS.BENEFITS.FORMS.LABELS.BINS_MANUAL' | translate}}</div>
                <div>
                    {{'SALE_REQUESTS.PAYMENT_METHODS.BENEFITS.FORMS.INFOS.BINS_MANUAL' | translate}}
                </div>
            </mat-radio-button>
        </mat-radio-group>
    </div>

    @if (form.controls.type.value === 'IMPORT') {
        <div>
            <app-csv-selector [csvFormGroup]="csvSelectionForm" csvControlName="selection" [exampleCsv]="exampleCsv" class="neutral" />
            @let importErrorMessage = form.controls.bins
                | obErrorMessage$
                | async;
            @if (importErrorMessage) {
                <span class="ob-error-message">{{importErrorMessage}}</span>
            }
            @let csvErrorMessage = csvSelectionForm.controls.selection
                | obErrorMessage$
                | async;
            @if (csvErrorMessage) {
                <span class="ob-error-message">{{csvErrorMessage}}</span>
            }
        </div>
    } @else if (form.controls.type.value === 'MANUAL') {
        <div>
            <div class="flex flex-row gap-4">
                <mat-form-field appearance="outline" class="ob-form-field basis-full">
                    <input matInput
                        [placeholder]="'SALE_REQUESTS.PAYMENT_METHODS.BENEFITS.FORMS.LABELS.BINS_MANUAL_PLACEHOLDER' | translate"
                        [formControl]="manualCtrl" (keyup.enter)="addBin()">
                    <mat-error [ob-form-errors]="manualCtrl" />
                </mat-form-field>
                <button mat-stroked-button color="primary" type="button" class="ob-button medium"
                    [disabled]="form.disabled" (click)="addBin()">
                    {{'FORMS.ACTIONS.ADD' | translate}}
                </button>
            </div>
            @let manualErrorMessage = form.controls.bins
                | obErrorMessage$
                | async;
            @if (manualErrorMessage) {
                <span class="ob-error-message">{{manualErrorMessage}}</span>
            }
        </div>
    }
    @if ((chips$ | async).length) {
        <div>
            <span class="mat-subtitle-2">
                {{'SALE_REQUESTS.PAYMENT_METHODS.BENEFITS.FORMS.LABELS.ADDED_BINS' | translate}}
            </span>
            <app-chips class="ellipsified-chips without-max-height" overrideClasses="handset"
                [isRemoveAllShown]="this.form.controls.bins.value.length > maxBins" [chips$]="chips$"
                [removeText]="'FORMS.ACTIONS.SHOW_MORE'"
                [isRemoveShow]="$vmSaleRequestGatewayBenefit().beingModified"
                (removeAllEmitter)="showMoreBins()"
                (removeEmitter)="removeBinChip($event)" />
        </div>
    }
</div>
