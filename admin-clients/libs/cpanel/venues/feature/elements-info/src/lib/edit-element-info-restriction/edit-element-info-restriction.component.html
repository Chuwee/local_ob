<div class="flex flex-col">
    <div class="flex justify-between">
        <h3 appEllipsify class="section-title flex basis-1/2">
            {{'VENUE_TPLS.ELEMENT_INFO.RESTRICTION.TITLE' | translate}}
            <span [matTooltip]="'INFORMATION_BADGE.BETA_FEATURE_TOOLTIP_INFO' | translate" class="ob-badge info">
                {{'INFORMATION_BADGE.BETA_FEATURE' | translate}}
            </span>
        </h3>
        <div class="flex gap-2 justify-center items-baseline">
            <mat-checkbox color="primary" [formControl]="textsGroup.controls['enabled']">
                {{ 'VENUE_TPLS.ELEMENT_INFO.ENABLE_IN_PORTAL' | translate }}
            </mat-checkbox>
            <mat-divider vertical="true" class="self-stretch" />
            <span class="ob-link" (click)="deleteContentComponent()">
                {{ 'VENUE_TPLS.ELEMENT_INFO.DELETE_CONTENT' | translate }}
            </span>
        </div>
    </div>
    <p class="mat-body-2">{{'VENUE_TPLS.ELEMENT_INFO.RESTRICTION.SUBTITLE' | translate}}</p>
</div>
<app-tabs-menu [formGroup]="langsFormGroup" type="language" overrideClasses="no-left-padding" #textsTabs>
    @for (language of languages; track language) {
        <ng-template appTab [ctrl]="langsFormGroup.get(language)" lazyLoad [label]="('LANGUAGES.' + language) | translate">
            <div class="flex flex-col gap-4">
                <mat-form-field appearance="outline" class="ob-form-field field-with-label no-padding">
                    <mat-label>{{'VENUE_TPLS.ELEMENT_INFO.RESTRICTION.DESCRIPTION_LABEL' | translate}}</mat-label>
                    <app-rich-text-area aria-label="description" [autoresize]="{min: 200, max: 200}"
                        [formControl]="langsFormGroup.controls?.[language].controls?.['description']"
                        [placeholder]="'VENUE_TPLS.ELEMENT_INFO.RESTRICTION.DESCRIPTION_PLACEHOLDER' | translate"/>
                    <mat-error [ob-form-errors]="langsFormGroup.controls?.[language].controls?.['description']" />
                    <mat-hint>{{'FORMS.ERRORS.MAX_LENGTH_EXCEEDED' | translate : ({value: 200})}}</mat-hint>
                </mat-form-field>
                @for (ctrl of langsFormGroup.controls?.[language].controls?.['agreement']?.controls; track $index;) {
                    <div class="flex justify-between">
                        <div class="flex flex-col basis-full">
                            <mat-form-field appearance="outline" class="ob-form-field field-with-label">
                                <mat-label>{{'VENUE_TPLS.ELEMENT_INFO.RESTRICTION.CONTENT_LABEL' | translate}}</mat-label>
                                <textarea matInput aria-label="description" [formControl]="ctrl.controls.text" rows="5"
                                    [placeholder]="'VENUE_TPLS.ELEMENT_INFO.RESTRICTION.CONTENT_PLACEHOLDER' | translate">
                                </textarea>
                                <mat-error [ob-form-errors]="ctrl.controls.text" />
                                <mat-hint>{{'FORMS.ERRORS.MAX_LENGTH_EXCEEDED' | translate : ({value: 150})}}</mat-hint>
                            </mat-form-field>
                        </div>
                        <div class="flex self-center justify-center basis-[32px]">
                            <button mat-icon-button type="button" class="ob-button small"
                                (click)="delete($index)" [disabled]="$index === 0 && !ctrl.controls.text.value">
                                <mat-icon>delete</mat-icon>
                            </button>
                        </div>
                    </div>
                }
            </div>
            <div class="add-link-btn flex justify-start items-center gap-2" [class.disabled]="isCreationDisabled()"
                [matTooltipDisabled]="!isCreationDisabled()" [matTooltip]="'VENUE_TPLS.ELEMENT_INFO.RESTRICTION.ADD_ERROR' | translate">
                <button mat-icon-button type="button" [disabled]="isCreationDisabled()"
                    class="ob-button mat-stroked-button xsmall" (click)="create()">
                    <mat-icon>add</mat-icon>
                </button>
                <span (click)="!isCreationDisabled() && create()">
                    {{'VENUE_TPLS.ELEMENT_INFO.RESTRICTION.ADD' | translate}}
                </span>
            </div>
        </ng-template>
    }
</app-tabs-menu>
