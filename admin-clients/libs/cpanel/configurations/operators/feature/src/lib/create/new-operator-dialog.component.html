<div class="dialog-msg-container" fxLayout="column nowrap" fxFlex="100%">
    <div mat-dialog-title fxFlex="auto" fxLayout="row" fxFlexAlign="start">
        <h2 fxFlex="100%" class="secondary title">{{'TITLES.NEW_OPERATOR' | translate}}</h2>
        <button mat-icon-button type="button" class="ob-button small" (click)="close()">
            <mat-icon>close</mat-icon>
        </button>
    </div>
    <div mat-dialog-content fxLayout="column" fxLayoutAlign="start stretch">
        <form [formGroup]="form" fxLayout="column" fxLayoutAlign="start stretch">
            <mat-form-field appearance="outline" class="ob-form-field">
                <mat-label>{{'FORMS.LABELS.NAME' | translate}}</mat-label>
                <input matInput aria-label="name" [placeholder]="'FORMS.LABELS.NAME' | translate" formControlName="name">
                <mat-error [ob-form-errors]="form" field="name"></mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" class="ob-form-field">
                <mat-label>{{'FORMS.LABELS.SHORT_NAME' | translate}}</mat-label>
                <input matInput aria-label="shortName" [placeholder]="'FORMS.LABELS.SHORT_NAME' | translate" formControlName="shortName">
                <mat-error [ob-form-errors]="form" field="shortName"></mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" class="ob-form-field">
                <mat-label>{{'FORMS.LABELS.CURRENCY' | translate}}</mat-label>
                <mat-select [placeholder]="'FORMS.SELECT.PLACE_HOLDER' | translate" formControlName="currency"
                    aria-label="currency">
                    <mat-option *ngFor="let currency of currencies$ | async" [value]="currency.code">
                        {{currency ? (( 'CURRENCIES.' + currency.code ) | translate) : ''}}
                    </mat-option>
                </mat-select>
                <mat-error [ob-form-errors]="form" field="currency"></mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" class="ob-form-field">
                <mat-label>{{'FORMS.LABELS.TIMEZONE' | translate}}</mat-label>
                <mat-select [placeholder]="'FORMS.SELECT.PLACE_HOLDER' | translate" formControlName="timezone"
                    aria-label="timezone">
                    <mat-option *ngFor="let timezone of timezones$ | async" [value]="timezone.olson_id">
                        {{timezone.name}}
                    </mat-option>
                </mat-select>
                <mat-error [ob-form-errors]="form" field="timezone"></mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" class="ob-form-field">
                <mat-label>{{'FORMS.LABELS.SHARD' | translate}}</mat-label>
                <mat-select [placeholder]="'FORMS.SELECT.PLACE_HOLDER' | translate" formControlName="shard"
                    aria-label="shard">
                    <mat-option *ngFor="let shard of shardsList" [value]="shard">
                        {{shard}}
                    </mat-option>
                </mat-select>
                <mat-error [ob-form-errors]="form" field="shard"></mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" class="ob-form-field">
                <mat-label>{{'FORMS.LABELS.LANGUAGE' | translate}}</mat-label>
                <mat-select [placeholder]="'FORMS.SELECT.PLACE_HOLDER' | translate" formControlName="language"
                    aria-label="language">
                    <mat-option *ngFor="let language of languages$ | async" [value]="language.code">
                        {{('LANGUAGES.' + language.code) | translate}}
                    </mat-option>
                </mat-select>
                <mat-error [ob-form-errors]="form" field="language"></mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline" class="ob-form-field">
                <mat-label>{{'FORMS.LABELS.GATEWAYS' | translate}}</mat-label>
                <mat-select [placeholder]="'FORMS.SELECT.PLACE_HOLDER' | translate" formControlName="gateways"
                    aria-label="gateways" [multiple]="true">
                    <mat-option *ngFor="let gateway of gateways$ | async" [value]="gateway.sid">
                        {{gateway.name}}
                    </mat-option>
                </mat-select>
                <mat-error [ob-form-errors]="form" field="gateways"></mat-error>
            </mat-form-field>
        </form>
    </div>
    <div mat-dialog-actions fxFlex="auto" fxLayout="row no wrap" fxLayoutAlign="end">
        <button mat-button type="button" class="ob-button" (click)="close()">
            {{'FORMS.ACTIONS.CANCEL' | translate}}
        </button>
        <button mat-flat-button color="primary" type="button" class="ob-button" (click)="createOperator()">
            {{'FORMS.ACTIONS.CREATE' | translate}}
        </button>
    </div>
</div>
<div class="spinner-container" *ngIf="reqInProgress$ | async">
    <mat-spinner></mat-spinner>
</div>
