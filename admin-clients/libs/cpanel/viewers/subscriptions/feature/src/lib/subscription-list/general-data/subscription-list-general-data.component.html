<app-form-container layout="menu" class="overflow-y-auto" (cancel)="cancel()" (save)="save()" [disabled]="isSaveCancelDisabled$ | async"
    [formGroup]="form">
    <form [formGroup]="form" *ngIf="subscriptionList$ | async as subscriptionList">
        <!-- SUBSCRIPTION LIST DATA -->
        <mat-expansion-panel expanded togglePosition="before">
            <mat-expansion-panel-header expandedHeight="*" collapsedHeight="*">
                <mat-panel-title>{{'SUBSCRIPTION_LIST.TITLE' | translate}}</mat-panel-title>
            </mat-expansion-panel-header>
            <div fxFlex="100%" fxLayout="column">
                <div fxLayout="column" class="toggle-container">
                    <div class="toggle-field" fxLayout="column">
                        <div fxFlex="28px" fxLayout="row">
                            <mat-slide-toggle class="ob-slide-toggle" formControlName="status">
                                {{'SUBSCRIPTION_LIST.TOGGLE_STATUS' | translate}}
                            </mat-slide-toggle>
                        </div>
                    </div>
                    <mat-divider fxFlex="100%"></mat-divider>
                    <div fxLayout="column">
                        <div fxFlex="30px"></div>
                    </div>
                </div>
                <div fxLayout="row">
                    <div class="details-non-editable-field ob-form-field" fxFlex="100%" fxFlex.lt-lg="80%"
                        fxLayout="column" aria-label="entity">
                        <span class="field-label">{{'FORMS.LABELS.ENTITY' | translate}}</span>
                        <span>{{subscriptionList.entity.name}}</span>
                    </div>
                </div>
                <div fxFlex="100%" fxLayout="row">
                    <mat-form-field fxFlex="500px" fxFlex.lt-lg="80%" appearance="outline"
                        class="ob-form-field field-with-label"
                        *ngIf="canLoggedUserWrite$ | async; else tourTitleReadOnlyTemplate">
                        <mat-label>{{'FORMS.LABELS.NAME' | translate}}</mat-label>
                        <input matInput aria-label="namr" [placeholder]="'FORMS.LABELS.NAME' | translate"
                            formControlName="name">
                        <mat-error [ob-form-errors]="form" field="name"></mat-error>
                    </mat-form-field>
                    <ng-template #tourTitleReadOnlyTemplate>
                        <div class="details-non-editable-field ob-form-field" fxFlex="100%"
                            fxFlex.lt-lg="80%" fxLayout="column" aria-label="name">
                            <span class="field-label">{{'FORMS.LABELS.NAME' | translate}}</span>
                            <span>{{subscriptionList.name}}</span>
                        </div>
                    </ng-template>
                </div>
                <div fxFlex="100%" fxLayout="row">
                    <mat-form-field fxFlex="500px" fxFlex.lt-lg="80%" appearance="outline"
                        class="ob-form-field field-with-label"
                        *ngIf="canLoggedUserWrite$ | async; else tourTitleReadOnlyTemplate">
                        <mat-label>{{'FORMS.LABELS.DESCRIPTION' | translate}}</mat-label>
                        <input matInput aria-label="namr"
                            [placeholder]="'FORMS.LABELS.DESCRIPTION' | translate"
                            formControlName="description">
                        <mat-error [ob-form-errors]="form" field="description"></mat-error>
                    </mat-form-field>
                    <ng-template #tourTitleReadOnlyTemplate>
                        <div class="details-non-editable-field ob-form-field" fxFlex="100%"
                            fxFlex.lt-lg="80%" fxLayout="column" aria-label="name">
                            <span class="field-label">{{'FORMS.LABELS.NAME' | translate}}</span>
                            <span>{{subscriptionList.description}}</span>
                        </div>
                    </ng-template>
                </div>
                <div fxLayout="column" class="toggle-container">
                    <div class="toggle-field" fxLayout="column">
                        <div fxFlex="28px" fxLayout="row">
                            <mat-slide-toggle class="ob-slide-toggle" formControlName="default">
                                {{'SUBSCRIPTION_LIST.TOGGLE_DEFAULT' | translate}}
                            </mat-slide-toggle>
                        </div>
                    </div>
                    <mat-divider fxFlex="100%"></mat-divider>
                    <div fxLayout="column">
                        <div fxFlex="30px"></div>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>
        <!-- SUBSCRIPTION LIST BUYERS -->
        <mat-expansion-panel expanded togglePosition="before">
            <mat-expansion-panel-header expandedHeight="*" collapsedHeight="*">
                <mat-panel-title>{{'SUBSCRIPTION_LIST.BUYERS' | translate}}</mat-panel-title>
            </mat-expansion-panel-header>
            <div class="list-container subscriptions-expansion-body" fxLayout="column">
                <app-subscription-clients fxFlex [currentSubscriptionList$]="subscriptionList$">
                </app-subscription-clients>
            </div>
        </mat-expansion-panel>
    </form>
</app-form-container>