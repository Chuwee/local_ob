<form [formGroup]="filtersForm" fxLayout="column" fxLayoutGap="16px">
    <app-context-notification contextType="info" class="min-padding full">
        {{'ORDER.POPOVER_FILTER_MSG' | translate}}
    </app-context-notification>
    <div fxLayout="column" fxLayoutGap="24px">
        @if ($areCurrenciesShown()) {
            <app-filter-currency-list [formControl]="filtersForm.get('currency')" [startDate]="startDate" [endDate]="endDate" />
        }
        @if ($isOperatorMode() || $isEntityAdmin()) {
            <div fxLayout="row" class="filter-block">
                <div class="ob-label" fxFlex="120px">
                    {{'FORMS.LABELS.CHANNEL_ENTITY' | translate}}
                </div>
                <div class="filter-block-input" fxFlex="570px">
                    <mat-form-field appearance="outline" class="ob-form-field">
                        <app-select-server-search formControlName="channelEntity"
                            [options$]="channelEntities$" [moreOptionsAvailable$]="moreChannelEntitiesAvailable$"
                            (loadOptions)="loadFilterChannelEntities($event.q, $event.nextPage)" />
                    </mat-form-field>
                </div>
            </div>
        }
        @if ($isOperatorMode() || $isEntityAdmin() || $areCurrenciesShown()) {
            <mat-divider [inset]="true" />
        }
        <div fxLayout="row" fxLayoutAlign="space-between" fxLayoutGap="50px" class="filter-block">
            <div>
                <div class="ob-label" fxFlex="120px">
                    {{'FORMS.LABELS.MEMBER_TYPE' | translate}}
                </div>
                <div class="filter-block-input" fxFlex="180px">
                    <mat-form-field appearance="outline" class="ob-form-field">
                        <mat-select formControlName="type" multiple
                            [placeholder]="'FORMS.SELECT.ALL_ELEMENTS_MALE' | translate">
                            @for (type of typesList; track $index) {
                                <mat-option [value]="type">
                                    {{type && (type.name | translate)}}
                                </mat-option>
                            }
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
            <div>
                <div class="ob-label" fxFlex="120px">
                    {{'FORMS.LABELS.MEMBER_STATE' | translate}}
                </div>
                <div class="filter-block-input" fxFlex="180px">
                    <mat-form-field appearance="outline" class="ob-form-field">
                        <mat-select formControlName="state" multiple
                            [placeholder]="'FORMS.SELECT.ALL_ELEMENTS_MALE' | translate">
                            @for (state of statesList; track $index) {
                                <mat-option [value]="state">
                                    {{state && (state.name | translate)}}
                                </mat-option>
                            }
                        </mat-select>
                    </mat-form-field>
                </div>
            </div>
        </div>
    </div>
</form>
