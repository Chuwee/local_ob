<div fxLayout="row wrap">
    @if((sessions$ | async)?.length <= sessionsPageSize){
        <div fxFlex="100%">
            <p class="ticket-table-count mat-subtitle-2" fxFlex="100%" fxLayoutAlign="start center">
                {{'TICKET.SESSIONS_SOLD_AT_SECONDARY_MARKET.TOTAL_NUMBER' | translate: { total: total } }}
            </p>
        </div>
    }
    @if((sessions$ | async)?.length > sessionsPageSize){
        <div class="filter-container" fxLayoutGap="20px" fxFlex="100%">
            <div class="paginator" fxFlex fxLayoutAlign="end center" fxLayoutGap="10px">
                @if(sessions$ | async; as sessions){
                    <p class="page-summary" [innerHTML]="'PAGINATION.PAGE_SUMMARY' | translate: {
                        startItem: getPaginatorStartItem(sessionsPage$ | async),
                        endItem: getPaginatorEndItem(sessionsPage$ | async, sessions?.length),
                        total: sessions?.length
                    }">
                    </p>
                }

                <mat-paginator [pageSize]="sessionsPageSize" [pageIndex]="sessions$ | async" hidePageSize (page)="pageFilter($event)"
                    [length]="(sessions$ | async)?.length" />
            </div>
        </div>
    }

    <div class="table-container" fxFlex="100%">
        <mat-table class="ob-table ticket-detail-table" [dataSource]="pagedSessions$ | async">
            <ng-container matColumnDef="event">
                <mat-header-cell *matHeaderCellDef class="head-cell">
                    {{'FORMS.LABELS.EVENT' | translate}}
                </mat-header-cell>
                <mat-cell *matCellDef="let row">
                    {{row.event?.name}}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="date">
                <mat-header-cell *matHeaderCellDef class="head-cell">
                    {{'FORMS.LABELS.DATE' | translate}}
                </mat-header-cell>
                <mat-cell *matCellDef="let row">
                    {{row.secondary_market?.purchase_date | dateTime : dateTimeFormats.shortDateTime}}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="session">
                <mat-header-cell *matHeaderCellDef class="head-cell">
                    {{'FORMS.LABELS.SESSION' | translate}}
                </mat-header-cell>
                <mat-cell appEllipsify matTooltipClass="ob-tooltip-nowrap" [matTooltip]="row.session?.name" *matCellDef="let row">
                    {{row.session?.name}}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="code">
                <mat-header-cell *matHeaderCellDef class="head-cell">
                    {{'FORMS.LABELS.CODE' | translate}}
                </mat-header-cell>
                <mat-cell appEllipsify matTooltipClass="ob-tooltip-nowrap" [matTooltip]="row.secondary_market?.purchase_order"
                    *matCellDef="let row">
                    <a class="ob-link" (click)="goToPurchasedItemRoute(row.id, row.secondary_market?.purchase_order)">
                        {{row.secondary_market?.purchase_order}}
                    </a>
                </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="printsColumns | async;  sticky: true" class="dense-row" />
            <mat-row *matRowDef="let row; columns: (printsColumns | async);" class="dense-row" />
        </mat-table>
    </div>
</div>