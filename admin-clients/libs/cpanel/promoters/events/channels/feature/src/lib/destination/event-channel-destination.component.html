<app-form-container (cancel)="cancel()" (save)="save()" [disabled]="$isInProgress() || !form.dirty">
    <mat-accordion [multi]="true" [togglePosition]="'before'">
        <!-- Provider Plan Settings -->
        <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header expandedHeight="*" collapsedHeight="*">
                <mat-panel-title>Provider Plan Settings</mat-panel-title>
            </mat-expansion-panel-header>
            
            <div class="flex flex-col gap-8 p-4" [formGroup]="providerPlanSettingsForm">
                <!-- General Sync Settings -->
                <div class="flex flex-col gap-4">
                    <h3 class="text-lg font-semibold">General Sync Settings</h3>
                    
                    <mat-checkbox formControlName="sync_sessions_as_hidden" class="align-top">
                        <div class="flex flex-col gap-1">
                            <span class="font-medium">Sync Sessions as Hidden</span>
                            <span class="text-sm text-gray-500 leading-snug">Check this to synchronize sessions as hidden</span>
                        </div>
                    </mat-checkbox>
                    
                    <mat-checkbox formControlName="sync_prices" class="align-top">
                        <div class="flex flex-col gap-1">
                            <span class="font-medium">Sync Prices</span>
                            <span class="text-sm text-gray-500 leading-snug">Check this to synchronize prices</span>
                        </div>
                    </mat-checkbox>
                    
                    <mat-checkbox formControlName="sync_surcharges" class="align-top">
                        <div class="flex flex-col gap-1">
                            <span class="font-medium">Sync Surcharges</span>
                            <span class="text-sm text-gray-500 leading-snug">Check this to synchronize surcharges</span>
                        </div>
                    </mat-checkbox>
                    
                    <mat-checkbox formControlName="round_prices_up" class="align-top">
                        <div class="flex flex-col gap-1">
                            <span class="font-medium">Round Prices Up</span>
                            <span class="text-sm text-gray-500 leading-snug">Check this to round prices up</span>
                        </div>
                    </mat-checkbox>
                    
                    <mat-checkbox formControlName="sync_session_labels" class="align-top">
                        <div class="flex flex-col gap-1">
                            <span class="font-medium">Sync Session Labels</span>
                            <span class="text-sm text-gray-500 leading-snug">Check this to synchronize session labels</span>
                        </div>
                    </mat-checkbox>
                    
                    <mat-checkbox formControlName="sync_session_pics" class="align-top">
                        <div class="flex flex-col gap-1">
                            <span class="font-medium">Sync Session Pictures</span>
                            <span class="text-sm text-gray-500 leading-snug">Check this to synchronize session pictures</span>
                        </div>
                    </mat-checkbox>
                    
                    <mat-checkbox formControlName="sync_session_type_ordering" class="align-top">
                        <div class="flex flex-col gap-1">
                            <span class="font-medium">Sync Session Type Ordering</span>
                            <span class="text-sm text-gray-500 leading-snug">Check this to synchronize session type ordering</span>
                        </div>
                    </mat-checkbox>
                    
                    <mat-checkbox formControlName="sync_hidden_status" class="align-top">
                        <div class="flex flex-col gap-1">
                            <span class="font-medium">Sync Hidden Status</span>
                            <span class="text-sm text-gray-500 leading-snug">Check this to synchronize hidden status</span>
                        </div>
                    </mat-checkbox>
                    
                    <mat-checkbox formControlName="sync_session_type_details" class="align-top">
                        <div class="flex flex-col gap-1">
                            <span class="font-medium">Sync Session Type Details</span>
                            <span class="text-sm text-gray-500 leading-snug">Check this to synchronize session type details</span>
                        </div>
                    </mat-checkbox>
                </div>

                <!-- Cancellation -->
                <div class="flex flex-col gap-4">
                    <h3 class="text-lg font-semibold">Cancellation</h3>
                    
                    <mat-form-field class="w-full">
                        <mat-label>Price Modifier</mat-label>
                        <input matInput type="number" formControlName="price_modifier" />
                        <mat-hint>Modifies price per session</mat-hint>
                    </mat-form-field>
                </div>

                <!-- Main Plan -->
                <div class="flex flex-col gap-4">
                    <h3 class="text-lg font-semibold">Main Plan</h3>
                    
                    <mat-checkbox formControlName="sync_main_plan_title" class="align-top">
                        <div class="flex flex-col gap-1">
                            <span class="font-medium">Sync Main Plan Title</span>
                            <span class="text-sm text-gray-500 leading-snug">Check this to synchronize the Main Plan Title</span>
                        </div>
                    </mat-checkbox>
                    
                    <mat-checkbox formControlName="sync_main_plan_description" class="align-top">
                        <div class="flex flex-col gap-1">
                            <span class="font-medium">Sync Main Plan Description</span>
                            <span class="text-sm text-gray-500 leading-snug">Check this to synchronize the Main Plan Description</span>
                        </div>
                    </mat-checkbox>
                    
                    <mat-checkbox formControlName="sync_main_plan_images" class="align-top">
                        <div class="flex flex-col gap-1">
                            <span class="font-medium">Sync Main Plan Images</span>
                            <span class="text-sm text-gray-500 leading-snug">Check this to synchronize the Main Plan Images</span>
                        </div>
                    </mat-checkbox>
                </div>
            </div>
        </mat-expansion-panel>

    </mat-accordion>
    <app-archived-event-mgr slot="actions-bar" [disabled]="form.dirty" />
</app-form-container>
@if($isInProgress()){
<div class="spinner-container">
    <mat-spinner />
</div>
}