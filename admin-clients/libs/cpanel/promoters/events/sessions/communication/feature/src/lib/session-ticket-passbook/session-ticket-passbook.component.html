<div fxLayout="column" fxFlex="0 0 852px" class="details-container">
    <mat-accordion [multi]="true" [togglePosition]="'before'">
        <mat-expansion-panel [expanded]="true" (expandedChange)="passbookContentExpanded = $event">
            <mat-expansion-panel-header expandedHeight="*" collapsedHeight="*">
                <mat-panel-title>{{'EVENTS.SESSION.COMMUNICATION.PASSBOOK_TITLE' | translate}}</mat-panel-title>
            </mat-expansion-panel-header>
            <form id="passbookContent" [formGroup]="passbookContentForm">
                <div class="section-block" fxLayout="column">
                    <h3 class="section-title">{{'EVENTS.COMMUNICATION.PASSBOOK.PRINCIPAL_IMAGE' | translate}}</h3>
                    <p class="section-description">
                        {{'EVENTS.COMMUNICATION.PASSBOOK.PRINCIPAL_IMAGE_INFO' | translate }}
                    </p>
                    <div fxFlex="100%" fxLayout="row">
                        <div fxFlex="326px" fxLayout="column" class="image-uploader">
                            <app-image-uploader [imageRestrictions]="imageRestrictions" formControlName="strip">
                            </app-image-uploader>
                        </div>
                    </div>
                </div>
                <div class="section-block" fxLayout="column">
                    <h3 class="section-title">{{'EVENTS.COMMUNICATION.PASSBOOK.TEMPLATE_CONTENT' | translate}}</h3>
                    <p class="section-description">
                        {{'EVENTS.COMMUNICATION.PASSBOOK.TEMPLATE_CONTENT_INFO' | translate }}
                    </p>
                    <div class="context-notification-container" *ngIf="isPassbookFieldActive$() | async" fxFlex="100%"
                        fxLayout="row" fxLayoutAlign="start">
                        <app-context-notification class="ob-context-notification" contextType="info" fxFlex.gt-sm="600px"
                            fxFlex="80%" fxLayoutAlign="start">
                            <p>{{'EVENTS.COMMUNICATION.PASSBOOK.EMPTY_LIST' | translate}}</p>
                        </app-context-notification>
                    </div>
                    <div fxFlex="100%" fxLayout="row" [fxHide]="isPassbookFieldActive$('title') | async">
                        <div fxFlex="436px" fxFlex.lt-lg="100%" fxLayout="column">
                            <span class="field-label">
                                {{'EVENTS.COMMUNICATION.TEXT.TITLE.LABEL' | translate}}
                            </span>
                            <mat-form-field appearance="outline" class="ob-form-field">
                                <input matInput aria-label="Additional Data" [placeholder]="sessionName"
                                    formControlName="title">
                                <mat-error [ob-form-errors]="passbookContentForm" field="title">
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div fxFlex="100%" fxLayout="row" [fxHide]="isPassbookFieldActive$('additionalData1') | async">
                        <div fxFlex="436px" fxFlex.lt-lg="100%" fxLayout="column">
                            <span class="field-label">
                                {{'EVENTS.COMMUNICATION.OTHER_DATA_1.LABEL' | translate}}
                            </span>
                            <mat-form-field appearance="outline" class="ob-form-field">
                                <input matInput aria-label="Additional Data"
                                    [placeholder]="'EVENTS.COMMUNICATION.OTHER_DATA_1.PLACEHOLDER' | translate"
                                    formControlName="additionalData1">
                                <mat-error [ob-form-errors]="passbookContentForm" field="additionalData1">
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div fxFlex="100%" fxLayout="row" [fxHide]="isPassbookFieldActive$('additionalData2') | async">
                        <div fxFlex="436px" fxFlex.lt-lg="100%" fxLayout="column">
                            <span class="field-label">
                                {{'EVENTS.COMMUNICATION.OTHER_DATA_2.LABEL' | translate}}
                            </span>
                            <mat-form-field appearance="outline" class="ob-form-field">
                                <input matInput aria-label="Additional Data"
                                    [placeholder]="'EVENTS.COMMUNICATION.OTHER_DATA_2.PLACEHOLDER' | translate"
                                    formControlName="additionalData2">
                                <mat-error [ob-form-errors]="passbookContentForm" field="additionalData2">
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                    <div fxFlex="100%" fxLayout="row" [fxHide]="isPassbookFieldActive$('additionalData3') | async">
                        <div fxFlex="436px" fxFlex.lt-lg="100%" fxLayout="column">
                            <span class="field-label">
                                {{'EVENTS.COMMUNICATION.OTHER_DATA_3.LABEL' | translate}}
                            </span>
                            <mat-form-field appearance="outline" class="ob-form-field">
                                <input matInput aria-label="Additional Data"
                                    [placeholder]="'EVENTS.COMMUNICATION.OTHER_DATA_3.PLACEHOLDER' | translate"
                                    formControlName="additionalData3">
                                <mat-error [ob-form-errors]="passbookContentForm" field="additionalData3">
                                </mat-error>
                            </mat-form-field>
                        </div>
                    </div>
                </div>
            </form>
        </mat-expansion-panel>
    </mat-accordion>
</div>
<mat-divider vertical="true"></mat-divider>
<div fxFlex="0 1 200px">
    <div class="ticket-template-legend legend-passbook" [fxHide]="!passbookContentExpanded" fxLayout="column"
        fxLayoutAlign="start start">
        <img src="assets/ticket-template/passbook-ticket-template-event.svg"
            [alt]="'EVENTS.COMMUNICATION.PASSBOOK' | translate">
        <button mat-flat-button [fxHide]="multiple" class="ob-button xsmall ticket-template-preview"
            (click)="downloadPassbook()">
            <mat-icon>get_app</mat-icon>
            {{'ACTIONS.DOWNLOAD.BTN' | translate}}
        </button>
        <div class="legend-title">{{'EVENTS.TEMPLATE' | translate}}</div>
        <div class="legend-value">{{defaultTicketPassbookName$ | async}}</div>
        <div class="legend-title">{{'EVENTS.PASSBOOK.INFO_PLANTILLA' | translate}}</div>
        <div class="legend-value">{{'EVENTS.PASSBOOK.INFO_PLANTILLA_TEXT' | translate}}</div>
    </div>
</div>
