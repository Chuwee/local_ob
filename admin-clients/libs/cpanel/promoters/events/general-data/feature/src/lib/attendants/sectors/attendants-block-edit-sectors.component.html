<app-searchable-paginated-selection #selection class="ob-medium-list nested-content"
    [class.field-error]="sectorsForm.invalid && sectorsForm.touched"
    [placeholder]="'FORMS.SEARCH.SECTORS' | translate" [form]="sectorsForm"
    [pageSize]="sectorsListPageSize" [data$]="sectorsPaged$" [metadata$]="sectorsMetadata$"
    [loading$]="sectorsLoading$" (loadData)="sectorsFilterChangeHandler($event)">
    <div slot="filter" class="badge-container" [class.empty]="!(sectorsMetadata$ | async)?.total">
        {{selectedSectors}} / {{(totalSectors$ | async) || 0}}
    </div>
    <button slot="filter" type="button" mat-icon-button class="ob-button medium" color="tertiary"
        [class.active]="selectedOnly" [disabled]="selectedSectors === 0"
        (click)="selectedOnly = !selectedOnly; sectorsFilterChangeHandler({offset: 0, q: selection.search})">
        <mat-icon>visibility</mat-icon>
    </button>
    <ng-template #selectionTemplate
        let-pageForm="pageForm" let-data="data" let-selectionChanged="selectionChanged">
        <app-selection-list [data]="data" [pageForm]="pageForm" [selectionChanged]="selectionChanged" class="small-rows">
            <ng-template #optionTemplate let-row>
                <div fxLayoutAlign="space-between">
                    <span>{{row.name}}</span>
                </div>
            </ng-template>
        </app-selection-list>
    </ng-template>
</app-searchable-paginated-selection>
<div *ngIf="sectorsForm.hasError('required') && sectorsForm.touched" class="error-description">
    <span>{{'FORMS.ERRORS.REQUIRED_FIELD' | translate}}</span>
</div>