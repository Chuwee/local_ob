@let currentStep = $currentStep();
<div class="dialog-msg-container">
    <div mat-dialog-title>
        <div class="flex flex-auto justify-between items-center">
            <h2 class="secondary title">{{'SEASON_TICKETS.GENERATE_RENEWALS.TITLE' | translate}}</h2>
            <button mat-icon-button type="button" class="ob-button small" (click)="close()">
                <mat-icon>close</mat-icon>
            </button>
        </div>
    </div>
    <app-wizard-bar [steps]="mapToStepsTitles(steps)" [enableNavigation]="true" (stepClick)="goToStep($event)" />
    @if (currentStep === 0) {
        <app-renewals-generate-csv-import-options
            [optionsFormGroup]="optionsFormGroup" [channelControlName]="'channel'"
            (isLoading)="optionsLoadingHandler($event)" />
    }
    @if (currentStep === 1) {
        <app-renewals-generate-csv-import-selection
            [selectionFormGroup]="selectionFormGroup" [selectionControlName]="'selection'"
            (isLoading)="selectionLoadingHandler($event)" />
    }
    @if (currentStep === 2) {
        <app-renewals-generate-csv-import-header-match
            [headerMatchFormGroup]="headerMatchFormGroup" [headerMatchControlName]="'headerMatch'"
            (isLoading)="headerMatchLoadingHandler($event)" />
    }
    <div mat-dialog-actions>
        <div class="flex flex-auto justify-end">
            <button type="button" mat-button class="ob-button" [disabled]="$isLoading()" (click)="close()">
                {{'FORMS.ACTIONS.CANCEL' | translate}}
            </button>
            <button mat-stroked-button color="tertiary" type="button" class="ob-button"
                    (click)="previousStep()" [disabled]="$isPreviousDisabled()">
                <mat-icon>arrow_back</mat-icon>
                {{'FORMS.ACTIONS.PREVIOUS' | translate}}
            </button>
            <button mat-flat-button color="primary" type="button" class="ob-button" (click)="nextStep()" [disabled]="$isNextDisabled()">
                {{$nextText()}}
                @if (currentStep !== steps.length - 1) {
                    <mat-icon iconPositionEnd>arrow_forward</mat-icon>
                }
            </button>
        </div>
    </div>
</div>
@if ($isLoading()) {
    <div class="spinner-container">
        <mat-spinner />
    </div>
}
