<app-form-container (cancel)="cancel()" (save)="save()" [disabled]="(isInProgress$ | async) || !form.dirty">
    <mat-accordion [multi]="true" [togglePosition]="'before'">
        <mat-expansion-panel [expanded]="true">
            <mat-expansion-panel-header expandedHeight="*" collapsedHeight="*">
                <mat-panel-title>{{'SEASON_TICKET.CHANNEL.PROMOTER_SURCHARGES.TITLE' | translate}}</mat-panel-title>
            </mat-expansion-panel-header>
            <app-season-ticket-channel-surcharges-promoter [form]="form" [surchargesRequestCtrl]="surchargesRequestCtrl"
                [currency]="currency$ | async" [channel]="channel$ | async">
            </app-season-ticket-channel-surcharges-promoter>
        </mat-expansion-panel>
        <ng-container *ngIf="(requestAccepted$ | async)">
            <mat-expansion-panel [expanded]="true">
                <mat-expansion-panel-header expandedHeight="*" collapsedHeight="*">
                    <mat-panel-title>{{'SEASON_TICKET.CHANNEL.CHANNEL_SURCHARGES.TITLE' | translate}}</mat-panel-title>
                </mat-expansion-panel-header>
                <app-season-ticket-channel-surcharges-channel [currency]="currency$ | async" [channel]="channel$ | async">
                </app-season-ticket-channel-surcharges-channel>
            </mat-expansion-panel>
            <mat-expansion-panel (afterExpand)="simulationExpanded = true" (afterCollapse)="simulationExpanded = false"
                *ngIf="(isInProgress$ | async) === false">
                <mat-expansion-panel-header expandedHeight="*" collapsedHeight="*">
                    <mat-panel-title>{{'SEASON_TICKET.CHANNEL.PRICE_SIMULATION.TITLE' | translate}}</mat-panel-title>
                </mat-expansion-panel-header>
                <app-season-ticket-channel-price-simulation [expanded]="simulationExpanded">
                </app-season-ticket-channel-price-simulation>
            </mat-expansion-panel>
        </ng-container>
    </mat-accordion>
</app-form-container>
<div class="spinner-container" *ngIf="(isInProgress$ | async)">
    <mat-spinner></mat-spinner>
</div>
