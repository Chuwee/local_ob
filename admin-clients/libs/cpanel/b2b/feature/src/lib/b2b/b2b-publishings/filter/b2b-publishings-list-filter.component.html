<form [formGroup]="filtersForm" fxLayout="column" fxLayoutGap="24px">
    <ng-container *ngIf="canSelectEntity$ | async">
        <div fxLayout="row" class="filter-block">
            <div class="ob-label">
                {{'B2B_PUBLISHINGS.FILTER.ENTITY' | translate}}
            </div>
            <div class="filter-block-input" fxFlex="540px">
                <mat-form-field appearance="outline" class="ob-form-field entity-select">
                    <mat-select formControlName="entity" [placeholder]="'FORMS.SELECT.ALL_ELEMENTS_FEMALE' | translate"
                        [compareWith]="compareById">
                        <mat-option>
                            <app-select-search #entitySelectSearch [options$]="entities$" searchField="name">
                            </app-select-search>
                        </mat-option>
                        <mat-option *ngFor="let entity of entitySelectSearch.getFilteredOptions$() | async" [value]="entity">
                            {{entity ? entity.name : ('FORMS.SELECT.ALL_ELEMENTS_FEMALE' | translate)}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
        <mat-divider [inset]="true"></mat-divider>
    </ng-container>
    <div fxLayout="row" fxLayoutAlign="space-between" fxLayoutGap="50px" class="filter-block">
        <div>
            <div class="ob-label">
                {{'B2B_PUBLISHINGS.FILTER.CHANNEL' | translate}}
            </div>
            <div class="filter-block-input" fxFlex="540px">
                <mat-form-field appearance="outline" class="ob-form-field">
                    <app-select-server-search [multiple]="false"
                        [placeholder]="'FORMS.SELECT.ALL_ELEMENTS_FEMALE' | translate" formControlName="channel"
                        [options$]="channels$" [moreOptionsAvailable$]="moreChannelsAvailable$"
                        (loadOptions)="loadChannels($event.q, $event.nextPage)">
                    </app-select-server-search>
                </mat-form-field>
            </div>
        </div>
    </div>
    <div fxLayout="row" fxLayoutAlign="space-between" fxLayoutGap="50px" class="filter-block">
        <div>
            <div class="ob-label">
                {{'B2B_PUBLISHINGS.FILTER.EVENT' | translate}}
            </div>
            <div class="filter-block-input" fxFlex="540px">
                <mat-form-field appearance="outline" class="ob-form-field">
                    <app-select-server-search [multiple]="false"
                        [placeholder]="'FORMS.SELECT.ALL_ELEMENTS_FEMALE' | translate" formControlName="event"
                        [options$]="events$" [moreOptionsAvailable$]="moreEventsAvailable$"
                        (loadOptions)="loadEvents($event.q, $event.nextPage)">
                    </app-select-server-search>
                </mat-form-field>
            </div>
        </div>
    </div>
    <div fxLayout="row" fxLayoutAlign="space-between" fxLayoutGap="50px" class="filter-block">
        <div>
            <div class="ob-label">
                {{'B2B_PUBLISHINGS.FILTER.SESSION' | translate}}
            </div>
            <div class="filter-block-input" fxFlex="540px">
                <mat-form-field appearance="outline" class="ob-form-field session-select">
                    <app-select-server-search [multiple]="false"
                        [placeholder]="'FORMS.SELECT.ALL_ELEMENTS_MALE' | translate" formControlName="session"
                        [options$]="sessions$" [moreOptionsAvailable$]="moreSessionsAvailable$"
                        (loadOptions)="loadSessions($event.q, $event.nextPage)">
                        <ng-template #optionTemplate let-row>
                            {{row.date_start | dateTime : dateTimeFormats.shortDateTime}} - {{row.name}}
                        </ng-template>
                    </app-select-server-search>
                </mat-form-field>
            </div>
        </div>
    </div>
    <mat-divider [inset]="true"></mat-divider>
    <div fxLayout="row" fxLayoutAlign="space-between" fxLayoutGap="50px" class="filter-block">
        <div>
            <div class="ob-label wrapped-label">
                {{'B2B_PUBLISHINGS.FILTER.PROFESSIONAL_CLIENT' | translate}}
            </div>
            <div class="filter-block-input" fxFlex="540px">
                <mat-form-field appearance="outline" class="ob-form-field client-select">
                    <app-select-server-search [multiple]="true"
                        [placeholder]="'FORMS.SELECT.ALL_ELEMENTS_MALE' | translate" formControlName="client"
                        [options$]="clients$" [moreOptionsAvailable$]="moreClientsAvailable$"
                        (loadOptions)="loadClients($event.q, $event.nextPage)">
                    </app-select-server-search>
                </mat-form-field>
            </div>
        </div>
    </div>
    <mat-divider [inset]="true"></mat-divider>
    <div fxLayout="row" fxLayoutAlign="space-between" class="filter-block">
        <div>
            <div class="ob-label">
                {{'B2B_PUBLISHINGS.FILTER.STATUS' | translate}}
            </div>
            <div class="filter-block-input" fxFlex="540px">
                <mat-form-field appearance="outline" class="ob-form-field">
                    <mat-select formControlName="status"
                        [placeholder]="'FORMS.SELECT.ALL_ELEMENTS_MALE' | translate">
                        <mat-option>
                            {{ 'FORMS.SELECT.ALL_ELEMENTS_MALE' | translate}}
                        </mat-option>
                        <mat-option *ngFor="let seatType of seatTypes" [value]="seatType">
                            {{seatType.name | translate}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </div>
        </div>
    </div>
    <mat-divider [inset]="true"></mat-divider>
    <div fxLayout="row" class="filter-block">
        <div class="ob-label wrapped-label">
            {{'B2B_PUBLISHINGS.FILTER.DATE' | translate}}
        </div>
        <div class="filter-block-input" fxFlex="180px">
            <mat-form-field appearance="outline" class="ob-form-field">
                <input matInput [matDatepicker]="startDateDP" [placeholder]="dateFormat" formControlName="startDate"
                    (focus)="startDateDP.open()">
                <button mat-icon-button matSuffix class="ob-button large no-hover-ripple"
                    (click)="$event.stopPropagation(); startDateDP.open();">
                    <mat-icon>event</mat-icon>
                </button>
                <mat-datepicker #startDateDP></mat-datepicker>
            </mat-form-field>
        </div>
        <div fxFlex="20px">
            <span fxFlex class="filter-block-dates-separator"></span>
        </div>
        <div class="filter-block-input" fxFlex="180px">
            <mat-form-field appearance="outline" class="ob-form-field">
                <input matInput [matDatepicker]="endDateDP" [placeholder]="dateFormat" formControlName="endDate"
                    (focus)="endDateDP.open()">
                <button mat-icon-button matSuffix class="ob-button large no-hover-ripple"
                    (click)="$event.stopPropagation(); endDateDP.open();">
                    <mat-icon>event</mat-icon>
                </button>
                <mat-datepicker #endDateDP></mat-datepicker>
            </mat-form-field>
        </div>
    </div>
</form>