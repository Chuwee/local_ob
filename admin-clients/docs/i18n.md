# i18n

### prune-i18n utility script 


This utility loads a json i18n file, and checks the use of each key along the project, finally, removes the unused keys from json file and saves it as pruned-18n.json.
```
npm run prune-i18n
```

### Json files explanation

Literals placed in the translations repository are divided in multiple sets of files, the root folder for cpanel is cpanel (obvious). 
In this folder are placed all core files for each language, and a folder for each module or weblate component, a weblate component is a set of translation files.
```
translation
└── cpanel
    ├── en-US.json
    ├── es_ES.json
    ├── ... 
    ├── events
    │   ├── en-US.json
    │   ├── es_ES.json
    │   └── ...
    └── channels
        ├── en-US.json
        ├── es_ES.json
        └── ...
```
Weblate uses components to manage every set of translations files.  
Green squared one references to root json files (/cpanel/\*.json).  
Blue squared ones references to each subfolder (cpanel-channels -> /cpanel/channels/\*.json, cpanel-events -> /cpanel/events/*.json)    
Translation subfolder component keys must be entered without the first part of the key, this part is added in execution by the app.   
Ej: the key EVENTS.TITLE in the code, must be entered in cpanel-events component in Weblate with the key TITLE alone. 

![weblate components](/docs/images/weblate-components.png)

i18n json files must follow the following structure (explanations below), :

```jsonc
{
	// CORE GROUPS //
	"TITLES": {...}
	"ACTIONS": {...},
	"FORMS": {	
		"ERRORS": {...},
		"FEEDBACKS": {...},
		"LABELS": {...},
		"INFOS": {
			"SEARCH": "Search",
			"EMPTY_INPUT_WARNING": "Empty field",
			"NAME_HELP": "Help name field...",
			"NAME_DISABLED_TOOLTIP": "To enable this field..."
		}
	},
	
	// API GROUPS //
	"API_ERRORS": {...},
	"ENUMS": {...},
	
	// COMPONENT GROUPS //
	"LISTS": {
		"ACTIONS": {...},
		"EMPTY": "Empty list",
		"SELECTED": {
			"SINGULAR_MALE": "Selected (Seleccionado)",
			"PLURAL_MALE": "Selecteds (Seleccionados)", 
			"PLURAL_FEMALE": "Selecteds (Seleccionadas)",
			"SINGULAR_FEMALE": "Selected (Seleccionada)"
		},
		...
	},
	
	// MODULE GROUPS //
	"EVENTS": {
		"TITLES": {...}
		"ACTIONS": {...},
		"FORMS": {	
			"ERRORS": {...},
			"FEEDBACK": {...},
			"LABELS": {...},
			"INFOS": {...},
			...
		},
		SESSIONS: {
		    ...
		}
		...
	}
	...
}
```

### MAIN GROUPS DESCRIPTION AND USAGE

| Group     | notes                                                                                 |
|-----------|---------------------------------------------------------------------------------------|
| CORE      | Groups that contains all cross app literals                                           |
| API       | Literals conditioned by api, errors and enums                                         |
| COMPONENT | Groups the literals of a concrete component                                           |
| MODULE    | Group the literals of a determinate module, generally modules from the 2nd level menu |

### CORE GROUPS

| Group           | notes                                                                              |
|-----------------|------------------------------------------------------------------------------------|
| TITLES          | Level 1 and 2 menu literals                                                        |
| ACTIONS         | Agnostic or cross used actions, generally button labels, but could be tooltips too |
| FORMS           | Cross literals related to forms                                                    |
| FORMS.ERRORS    | Shared field validation errors, like required, min, max validators...              |
| FORMS.FEEDBACKS | Shared commit texts, usually shown on snackbars like "saved" or "deleted"          |
| FORMS.LABELS    | Shared form field labels like "name", "code", "phone"...                           |
| FORMS.INFOS     | Shared form field descriptors, warnings, helps, tooltip...                         |

### API GROUPS

| Group           | notes                          |
|-----------------|--------------------------------|
| API_ERRORS      | Api errors mapping to messages |
| ENUMS           | Api enums                      |

### COMPONENTS GROUPS and MODULE GROUPS

They replicate the core groups structure, module groups can have submodule groups like:  
```
EVENT
    ACTIONS
    FORMS
    ...
    -> CHANNELS
        ACTIONS
        FORMS
        ...
    -> PROMOTIONS
        ACTIONS
        FORMS
        ...
```

## Current core files structure

There are domains for everything, if you have to create a new one, ask JD, thk.

### Core
```
TITLES: (ONLY LEVEL 1-2 MENU ITEMS)
ACTIONS
API_ERRORS
ENUMS
FORMS
```

#### COMPONENTS
```
DOWNLOAD_APP
FILE
IMAGE_CROPPER
INFORMATION_BADGE
LISTS
PAGINATION
RANGES
UPLOAD_IMAGE
```

#### MODULES
```
B2B
BI
BUYERS
COLLECTIVES
CUSTOMERS
ENTITIES
GIFT_CARDS
INVOICING
LOGIN
MEMBERS
NOTIFICATIONS
ORDERS
PAYOUTS
PRODUCERS
PRODUCTS
PROMOTERS
PROMOTIONS
SALE_REQUESTS
SEASON_TICKETS
SECONDARY_MARKET
SUBSCRIPTION_LISTS
TERMINALS
TICKET_TEMPLATES
TICKETS
TOURS
USERS
VENUE_TPLS
VENUES
VOUCHERS
WEBHOOKS
```

### [Pending tasks >](i18n-tasks.md)
